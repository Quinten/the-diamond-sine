u=24,uu=u*u,v=u/2,vv=v*v,q=Math.sqrt(2*vv),b.style.background="#000",c.fillStyle="#fff",c.translate((a.width-uu)/2,(a.height-uu)/2),P=Math.PI,V=c.fillRect.bind(c),R=c.rotate.bind(c),g=[u=>u,q=>V(-v,-v,u-1,u-1),u=>[c.beginPath(),c.arc(0,0,v-1,0,2*P),c.fill()],u=>[R(P/4),V(-q/2,-q/2,q,q)],u=>[R(P/4),V(-q/2,-q/6,q,q/3),R(P/2),V(-q/2,-q/6,q,q/3)]],m=u=>(q=1e4*Math.sin(u++))=>q*q%1,z=u=>{for(r=m(1),s=r()*uu|0,p=[];p.length<uu;)p.push(p.length==s?4:4*r()|0)},z(),f=q=>{for(c.clearRect(0,0,uu,uu),y=0;y<uu;){for(x=0;x<u;)c.save(),c.translate(x*u+u/2,y+u/2),g[p[y+x]](),c.restore(),x+=1;y+=u}-1===p.indexOf(4)&&(z(),f())},f(),onkeyup=q=>{w=[-1,-1,u,0,1,-1,-u,1,u,-u][q.which%32%17],p[s]=0,s=s+w<0?s+w+uu:(s+w)%uu,p[s]=2==p[s]?2:4,f()};